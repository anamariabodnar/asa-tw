<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<meta name="description" content="Real-time security alerter web application for exploits">
		<meta name="keywords" content="real-time, security, exploits, alert, advices, article, solutions for exploits">
		<meta author="author" content="Paula Carp, Ana Bodnar">
		<title> ASA | Exploits </title>
		<link rel="stylesheet" type="text/css" href="<?php echo base_url(); ?>assets/css/style.css">
		<link rel="stylesheet" href="<?php echo base_url(); ?>assets/css/exploits.css" type="text/css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="icon" href="<?php echo base_url(); ?>assets/image/icon.png">
	</head>
	<body>
		<header>
			<div class="container">
				<div id="branding">
					<h1>Application <span class = "highlight"> Security Alerter</span></h1>
				</div>
				<nav>
					<ul>
						<li><a href = "<?php echo base_url(); ?>index.php/main/index"> HOME </a></li>
						<?php if($this->session->userdata('isUserLoggedIn')) : ?>
						<li><a href = "<?php echo base_url(); ?>index.php/about/index"> ABOUT </a></li>
						<li class="current"><a href = "<?php echo base_url(); ?>index.php/exploits/index"> EXPLOITS </a></li>
						<li><a href = "<?php echo base_url(); ?>index.php/solutions/index"> SOLUTIONS </a></li>
						<li><a href = "<?php echo base_url(); ?>index.php/users/logout"><image src="<?php echo base_url(); ?>assets/image/logout.png" width=70px></image></a></li>
						<?php elseif (!$this->session->userdata('isUserLoggedIn')) :?>
						<li><a href = "<?php echo base_url(); ?>index.php/about/login_to_continue"> ABOUT </a></li>
						<li class="current"><a href = "<?php echo base_url(); ?>index.php/exploits/login_to_continue"> EXPLOITS </a></li>
						<li><a href = "<?php echo base_url(); ?>index.php/solutions/login_to_continue"> SOLUTIONS </a></li>
						<li><a href = "<?php echo base_url(); ?>index.php/users/login"><image src="<?php echo base_url(); ?>assets/image/login.png" width=70px></image></a></li>
						<?php endif; ?>
					</ul>
				</nav>
			</div>
		</header>
		<div class="search-box-wrapper">
			<input type="text" placeholder="Search..." class="search-box-input">
			<button class="search-box-button">&#x1f50d;</button> 
		</div>
		<div class="search-box-wrapper">
			<select class="search-box-input">
				<option value="" disabled selected>Select your option</option>
				<option value="html">Html</option>
				<option value="json">Json</option>
				<option value="atom">Atom</option>
			</select>
			<button class="search-box-button">Download as</button>
		</div>
		<div class="search-box-wrapper">
			<a href="statistics.html" class="view-statistics">View Statistics</a>
		</div>
		<div id="pagination">
			<p id="temporar-pagination"><< prev 1 2 3 4 5 6 7 8 9 10 next >></p>
		</div>
		<article class="main">
			<table align="center">
				<tr>
					<td colspan="7" id="header"><h1> The latest Web Application Exploits</h1></td>
				</tr>
				<tr id="fixed">
					<th>Id</th>
					<th>Data</th>
					<th>Title</th>
					<th>Platform</th>
					<th>Author</th>
				</tr>
				<?php
						$results_per_page=50;
						if(isset($_POST['filter'])){
							//call method for getting filtered exploits
						}
						else{
							//call method for getting number of rows
							$number_of_rows = 100;
							
							//number of total pages available
							$number_of_pages = ceil($number_of_rows/$results_per_page);
							
							//determine which page number visitor is on
							if(!isset($_GET['page']))
								$page=1;
							else 
								$page = $_GET['page'];
							
							$current_page_first_result = ($page-1)*$results_per_page + 1;
							$page_upper_limit = $current_page_first_result + $results_per_page;
							
							//retrieve selected result from database
							print_r($exploits);
							print '<tr>';

							foreach ($exploits as $exploit) {
								foreach($exploit as $row){
									print '<td>'.$row['id'] .'</td>';
									print '<td>'.$row['date'] .'</td>';
									print '<td>'.$row['title'] .'</td>';
									print '<td>'.$row['author'] .'</td>';
									print '<td>'.$row['platform'] .'</td>';
								}
							}
							print '</tr>';
							//create links for pages
							for($page=1;$page<=$number_of_pages;$page++){
							echo ' <a href ="exploits.php?page=' . $page . '">' . $page . ' </a> ';
							}
						}
						?>
			</table>
		</article>
		<a class="w-toplink" href="#top" title="Back to top"></a>
		<footer>
			<p>ASA | Application Security Alerter, Copyright &copy; 2017 </p>
		</footer>
	</body>
</html>